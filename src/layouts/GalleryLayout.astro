---
import Nav from "../components/Nav.astro";
import Footer from "../components/Footer.astro";
import Preloader from "../components/Preloader.astro";
import "../styles/global.css";
import ViewTransitions from "astro/components/ViewTransitions.astro";
const { pageTitle } = Astro.props;
---

<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg?v=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />
    <ViewTransitions />
    <title>{pageTitle}</title>
  </head>

  <body>
    <Preloader />
    <div class="flex flex-col min-h-screen">
      <div id="nav-container">
        <Nav id="main-nav" bg="bg-main" coverSquare="coverSquare-main" showButtons={false} />
      </div>
      <slot />
      <Footer />
    </div>

    <script>
      document.addEventListener("astro:page-load", () => {
        const navContainer = document.getElementById("nav-container");

        if (navContainer) {
          // Make nav always visible - temporarily disabled scroll behavior
          navContainer.classList.add("visible");
          
          // Commented out scroll behavior for temporary disable
          // const showNavOnScroll = () => {
          //   if (document.documentElement.scrollTop > 200) {
          //     navContainer.classList.add("visible");
          //   } else {
          //     navContainer.classList.remove("visible");
          //   }
          // };
          // 
          // showNavOnScroll();
          // document.addEventListener("scroll", showNavOnScroll);
        }
      });
    </script>

    <style is:global>
      #nav-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 100;
        transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        transform: translateY(-100%);
        opacity: 0;
      }

      #nav-container.visible {
        transform: translateY(0);
        opacity: 1;
      }
    </style>
  </body>
</html>
