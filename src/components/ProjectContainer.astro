---
import ProjectButton from "../components/ProjectButton.astro";
import ThemeToggle from "./ThemeToggle.astro";
---

<div class="w-full px-4 py-4" id="hero">
  <div class="hero-container h-full">
    <!-- Fixed position SVGs -->
    <div class="hero-logo-left">
      <img src="/svgs/ray.svg" alt="Ray" class="ray-logo" />
    </div>
    <div class="hero-logo-right">
      <img src="/svgs/xia.svg" alt="Xia" class="xia-logo" />
    </div>

    <!-- Top section with role, location, and description -->
    <div class="hero-top-section">
      <!-- Role and location centered at top -->
      <div class="hero-header-center">
        <div class="hero-header-text" id="hero-role">Product Designer</div>
        <div class="hero-header-text" id="hero-location">
          Based in San Francisco
        </div>
      </div>

      <!-- Description text centered -->
      <div class="hero-description">
        I specialize in human-AI collaboration for enterprise teams, with a
        systematic approach to multi-product ecosystems and frontend engineering
        skills that turn design into delivery fast.
      </div>
    </div>

    <!-- Bottom section with experience -->
    <div class="hero-bottom-section">
      <div class="hero-experience">
        <div class="hero-experience-grid">
          <div class="hero-experience-col1">
            <div class="hero-experience-label">Prev.</div>
          </div>
          <div class="hero-experience-col2">
            <div class="hero-experience-content">
              <div class="experience-item">
                <span class="org-name">CARNEGIE MELLON UNIV.</span> Lead Product
                Designer
              </div>
              <div class="experience-item">
                <span class="org-name">BJC HEALTHCARE</span> UX Designer
              </div>
              <div class="experience-item">
                <span class="org-name">RULAI, INC.</span> UX Designer & Engineer
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Projects -->
<div
  class="category flex flex-col md:flex-row w-full px-4 relative gap-0"
  id="projects"
>
  <!-- <div class="category-label">
    <div class="sticky top-24 pt-10">
      <a href="#product-and-experience"><div>Product & Experience</div></a>
    </div>
  </div> -->
  <div class="project-wrap" id="product-and-experience">
    <ProjectButton
      title="Streamliming shift scheduling for nurses"
      description="BJC HealthCare"
      scopes={[
        "Enterprise internal tool",
        "Multi-platform",
        "End-to-end prototyping",
      ]}
      href="/projects/bjc-flexible-scheduling"
      mediaType="image"
      imgPath="../assets/images/bjc-cover-flex-sq.jpg"
      altText="Cover image for the BJC Virtual Nursing project"
    />
    <ProjectButton
      title="What nurses need to work virtually"
      description="BJC HealthCare"
      scopes={["User Research", "Task Anlysis", "Data Analysis"]}
      href="/projects/bjc-virtual-nursing"
      mediaType="image"
      imgPath="../assets/images/bjc-cover-main-sq.jpg"
      altText="Cover image for the BJC Virtual Nursing project"
    />
    <ProjectButton
      title="Personalizing virtual assistant demos"
      description="Rulai, Inc."
      scopes={["B2B SaaS", "Conversation Design", "Demo Customization"]}
      href="/projects/rulai"
      mediaType="image"
      imgPath="../assets/images/rulai-cover-sq.jpg"
      altText="Cover image for the Rulai project"
    />
    <ProjectButton
      title="The Path"
      description="Personal"
      scopes={["Adult Care", "Interaction Design", "Design Systems"]}
      href="/projects/the-path"
      mediaType="video"
      videoSrc="/videos/covers/the-path-cover-video.mp4"
      altText="Cover video for the Path project"
    />
  </div>
</div>
<!-- <div class="category flex flex-col md:flex-row w-full pl-4 relative">
  <div class="category-label">
    <div class="sticky pt-8 top-16">
      <a href="#motion"><div>Motion</div></a>
    </div>
  </div>
  <div class="project-wrap" id="motion">
    <ProjectButton
      title="pipe type"
      description="A Creative Experiment"
      scopes={["Academic", "Interaction Design", "UI Development", "2024"]}
      mediaType="video"
      href="/projects/pipe-type"
      videoSrc="/videos/covers/pipe-cover-video.mp4"
      altText="Cover video for the Pipe Type project"
    />
    <ProjectButton
      title="how cities breathe"
      description="A Creative Experiment"
      scopes={["Academic", "Interaction Design", "UI Development", "2023"]}
      mediaType="video"
      href="/projects/how-cities-breathe"
      videoSrc="/videos/covers/cities-cover-video.mp4"
      altText="Cover video for the How Fast the Wind Blows project"
    />
  </div>
</div> -->

<script>
  document.addEventListener("astro:page-load", () => {
    //Cursor following effect for hero section
    function navHoverEffect(buttonId, targetId) {
      const button = document.querySelector(buttonId) as HTMLElement;
      const target = document.querySelector(targetId) as HTMLElement;

      if (button !== null && target !== null) {
        function follow(e) {
          const offsetX = -24;
          const offsetY = -1 * target.offsetHeight;
          target.style.left = `${e.pageX + offsetX}px`;
          target.style.top = `${e.pageY - window.scrollY + offsetY}px`;
        }

        target.style.transition =
          "filter 200ms ease-out, visibility 100ms linear, opacity 200ms linear";
        target.style.filter = "saturate(0%) contrast(50%)";
        button.style.transform = "translate(0, 0)";
        button.style.transition = "transform 400ms ease-out";
        target.style.opacity = "0";

        button.addEventListener("mouseenter", () => {
          target.style.display = "block";
          target.style.visibility = "visible";
          setTimeout(() => {
            target.style.filter = "saturate(100%) contrast(100%)";
            target.style.opacity = "1";
          }, 0.2);
          document.addEventListener("mousemove", follow);
        });

        button.addEventListener("mouseleave", () => {
          target.style.display = "none";
          target.style.visibility = "hidden";
          setTimeout(() => {
            target.style.filter = "saturate(0%) contrast(50%)";
            target.style.opacity = "0";
          }, 0.2);
        });
      }
    }

    // Dark mode SVG switcher
    function updateLogoForTheme() {
      const rayLogo = document.querySelector(".ray-logo") as HTMLImageElement;
      const xiaLogo = document.querySelector(".xia-logo") as HTMLImageElement;
      const isDarkMode = document.documentElement.classList.contains("dark");

      if (rayLogo) {
        rayLogo.src = isDarkMode ? "/svgs/ray-dark.svg" : "/svgs/ray.svg";
      }

      if (xiaLogo) {
        xiaLogo.src = isDarkMode ? "/svgs/xia-dark.svg" : "/svgs/xia.svg";
      }
    }

    // Initial logo update
    updateLogoForTheme();

    // Watch for theme changes
    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (
          mutation.type === "attributes" &&
          mutation.attributeName === "class"
        ) {
          updateLogoForTheme();
        }
      });
    });

    // Start observing the document element for class changes
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ["class"],
    });

    navHoverEffect("#profile-img", "#about-btn");
    navHoverEffect("#project-nav", "#project-btn");
  });
</script>

<style>
  a {
    border-bottom: 1.5px solid var(--color-border-secondary);
  }

  a:hover {
    border-bottom: 1.5px solid var(--color-border-main);
  }

  .project-wrap {
    width: 100%;
    display: grid;
    grid-template-columns: 1fr;
    margin-top: 10vh;
    /* row-gap: 40px; */
  }

  .category {
    height: max-content;
  }

  .category-label {
    /* font-family: "TT Fors"; */
    font-family: "Figtree";
    font-size: 1.2rem;
    transition: all 250ms ease-in-out;
    font-weight: 300;
    font-style: italic;
    letter-spacing: -0.025em;
    line-height: 0.9;
    color: var(--color-text-secondary);
  }

  .img-wrap {
    position: fixed;
    text-align: center;
    display: none;
    z-index: 1000;
    pointer-events: none;
    width: 12rem;
  }

  #about-btn {
    width: 10rem;
  }

  #hero {
    font-family: "LT Cushion";
    font-weight: 375;
    font-size: 1.2rem;
    transition: all 250ms ease-in-out;
    overflow: hidden;
  }

  .hero-container {
    position: relative;
    display: flex;
    flex-direction: column;
    /* justify-content: space-between; */
  }

  .hero-top-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding-top: 12rem;
    z-index: 10;
  }

  .hero-bottom-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding-top: 35vh;
    z-index: 10;
  }

  .hero-header-center {
    margin-bottom: 4rem;
  }

  .hero-header-text {
    font-family: "Figtree";
    font-size: 0.9rem;
    line-height: 1.4;
    font-weight: 600;
    color: var(--color-accent);
  }

  #hero-role {
    text-transform: uppercase;
  }

  #hero-location {
    font-size: 0.85rem;
    font-weight: 350;
    color: var(--color-text-main);
    margin-top: 0.2rem;
  }

  .hero-description {
    width: 100%;
    max-width: 600px;
    font-size: 1.2rem;
    line-height: 1.4;
    font-weight: 300;
    color: var(--color-text-main);
  }

  .hero-experience {
    width: fit-content;
  }

  .hero-experience-grid {
    display: grid;
    grid-template-columns: 6rem 1fr;
    font-family: "Figtree";
    font-size: 0.8rem;
    line-height: 1.4;
    text-align: left;
  }

  .hero-experience-content {
    width: 100%;
    font-size: 1rem;
    line-height: 1.3;
    color: var(--color-text-main);
  }

  .hero-logo-left {
    position: absolute;
    left: 0;
    top: 75%;
    transform: translateY(-50%);
    z-index: 5;
  }

  .hero-logo-right {
    position: absolute;
    right: 0;
    top: 80%;
    transform: translateY(-50%);
    z-index: 5;
  }

  .ray-logo {
    height: 15vw;
    width: auto;
    max-width: none;
    transform-origin: left center;
  }

  .xia-logo {
    height: 15vw;
    width: auto;
    max-width: none;
    transform-origin: right center;
  }

  .experience-item {
    font-size: 0.8rem;
    color: var(--color-text-main);
    padding-bottom: 0.35rem;
    font-weight: 400;
  }

  .experience-item:last-child {
    padding-bottom: 0;
  }

  .org-name {
    font-weight: 300;
    padding-right: 0.25rem;
  }

  #project-nav {
    height: 100%;
    margin-top: 2rem;
  }

  #profile-wrap,
  #profil-wrap:hover,
  #project-nav,
  #project-nav:hover {
    border-bottom: none;
  }

  #link-to-projects {
    /* font-family: "TT Fors"; */
    font-family: "Figtree";
    text-transform: uppercase;
    font-weight: 400;
    font-size: 0.875rem;
    margin-top: 10vh;
    border: none;
  }

  #link-to-projects svg {
    width: 20px;
    display: inline;
    fill: var(--color-text-main);
  }

  @media (min-width: 640px) {
    .category-label {
      border-bottom: 1.5px solid var(--color-border-secondary);
      width: 8rem;
    }

    .hero-container {
    }

    .hero-top-section {
      padding-top: 8rem;
    }

    .hero-header-center {
      margin-bottom: 3rem;
    }

    .hero-header-text {
      font-size: 1rem;
    }

    .hero-description {
      font-size: 1.4rem;
      max-width: 540px;
      letter-spacing: -0.01rem;
      height: 6.2rem;
    }

    .hero-bottom-section {
      padding-top: 45vh;
    }

    .hero-experience-grid {
      font-size: 0.85rem;
    }

    .hero-experience-content {
      font-size: 1rem;
    }

    .experience-item {
      font-size: 0.85rem;
    }
  }

  @media (min-width: 1024px) {
    .project-wrap {
      grid-template-columns: repeat(2, 1fr);
      /* column-gap: var(--gutter, 2rem); */
    }

    .project-wrap > *:nth-child(even) .button-wrap {
      border-left: 1.5px solid var(--color-border-secondary);
    }

    .category-label {
      width: 10rem;
      font-size: 1.5rem;
    }

    #hero {
      font-family: "LT Cushion";
      font-weight: 400;
      font-size: 1.2rem;
      transition: all 250ms ease-in-out;
      overflow: hidden;
      letter-spacing: 0.005rem;
    }

    .hero-header-text {
      font-size: 0.9rem;
    }

    #hero-location {
      font-size: 0.85rem;
    }

    .hero-description {
      font-size: 1.6rem;
      max-width: 640px;
    }

    .ray-logo {
      height: clamp(100px, 20vh, 180px);
    }

    .xia-logo {
      height: clamp(100px, 20vh, 180px);
    }

    .hero-experience-content {
      font-size: 1.1rem;
    }
  }

  @media (min-width: 1440px) {
    .category-label {
      width: 15rem;
    }

    .ray-logo {
      height: 20vh;
    }

    .xia-logo {
      height: 20vh;
    }
  }
</style>
